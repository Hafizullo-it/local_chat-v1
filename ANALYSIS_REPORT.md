# –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–µ–∫—Ç–∞ Modern Chat

–Ø –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–ª –ø—Ä–æ–µ–∫—Ç –∏ –≤—ã—è–≤–∏–ª –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –∞ —Ç–∞–∫–∂–µ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –∏ –Ω–µ–¥–æ—á–µ—Ç—ã.

## üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

1. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ä–µ–∞–ª—å–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (–°–µ—Å—Å–∏–π/–¢–æ–∫–µ–Ω–æ–≤)**:
   - –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –¥–æ–≤–µ—Ä—è–µ—Ç –¥–∞–Ω–Ω—ã–º –∏–∑ `localStorage`. –õ—é–±–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –æ—Ç–∫—Ä—ã—Ç—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞, –∏–∑–º–µ–Ω–∏—Ç—å —Å–≤–æ–π `userId` –∏–ª–∏ `role` –Ω–∞ `admin`, –∏ –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ —á—É–∂–∏–º —Å–æ–æ–±—â–µ–Ω–∏—è–º –∏–ª–∏ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏.
   - API –º–∞—Ä—à—Ä—É—Ç—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `/api/messages/:u1/:u2`) –Ω–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –∑–∞–ø—Ä–∞—à–∏–≤–∞—é—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–º –ø–µ—Ä–µ–ø–∏—Å–∫–∏. –ó–Ω–∞—è ID, –º–æ–∂–Ω–æ –ø—Ä–æ—á–∏—Ç–∞—Ç—å –ª—é–±–æ–π —á–∞—Ç.

2. **–ù–µ–∑–∞—â–∏—â–µ–Ω–Ω–∞—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å**:
   - –ü–µ—Ä–µ—Ö–æ–¥ –≤ –∞–¥–º–∏–Ω–∫—É –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ—Å—Ç—ã–º —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–º —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –≤ URL (–Ω–∞–ø—Ä–∏–º–µ—Ä, `?userId=...&role=admin`). –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª—é–±–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø–æ–¥–¥–µ–ª–∞—Ç—å URL –∏ –∑–∞–π—Ç–∏ –≤ –ø–∞–Ω–µ–ª—å.
   - –ê–¥–º–∏–Ω—Å–∫–∏–µ API –∑–∞–ø—Ä–æ—Å—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç `adminId` –ø—Ä–æ—Å—Ç–æ –ø–æ ID –∏–∑ –±–∞–∑—ã, –Ω–æ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è—é—Ç –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç—å (–Ω–µ—Ç –ø–∞—Ä–æ–ª—è –∏–ª–∏ —Ç–æ–∫–µ–Ω–∞ –≤ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ).

3. **–£—Ç–µ—á–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**:
   - –ú–∞—Ä—à—Ä—É—Ç `/api/users` –æ—Ç–¥–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –í–°–ï–• –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤–º–µ—Å—Ç–µ —Å –∏—Ö –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º–∏ ID. –≠—Ç–æ –æ–±–ª–µ–≥—á–∞–µ—Ç –∞—Ç–∞–∫—É –ø–æ –ø–æ–¥–º–µ–Ω–µ ID.

4. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–∞–π–ª–æ–≤**:
   - –í `server.js` (—Å—Ç—Ä–æ–∫–∞ 92) –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω —Ñ–∏–ª—å—Ç—Ä —Ñ–∞–π–ª–æ–≤ `fileFilter`. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä –º–æ–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –æ–ø–∞—Å–Ω—ã–µ —Ñ–∞–π–ª—ã (—Ö–æ—Ç—è –µ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∞ MIME-—Ç–∏–ø–∞ –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ –æ—à–∏–±–æ–∫, –æ–Ω–∞ –º–æ–∂–µ—Ç –Ω–µ —Å—Ä–∞–±–æ—Ç–∞—Ç—å –¥–ª—è –≤—Å–µ—Ö —Å–ª—É—á–∞–µ–≤ Multer).

## üü° –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –∏ –±–∞–≥–∏

1. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ ID –≤ HTML**:
   - –í —Ñ–∞–π–ª–µ `chat.html` (—Å—Ç—Ä–æ–∫–∏ 430 –∏ 453) –¥–≤–∞–∂–¥—ã –æ–±—ä—è–≤–ª–µ–Ω –±–ª–æ–∫ `<div id="context-menu">`. –≠—Ç–æ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –¥–ª—è HTML –∏ –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –æ—à–∏–±–∫–∞–º –≤ JavaScript –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –º–∞–Ω–∏–ø—É–ª–∏—Ä–æ–≤–∞–Ω–∏—è –º–µ–Ω—é.

2. **–ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –ª–æ–≥–∏–∫–∏ –±–∞–Ω–∞**:
   - –°–æ–±—ã—Ç–∏–µ —Å–æ–∫–µ—Ç–∞ `ban-user` —Ç–æ–ª—å–∫–æ –æ—Ç–∫–ª—é—á–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –Ω–æ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –±–∞–Ω –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö. –ü—Ä–∏ —ç—Ç–æ–º REST API `/api/admin/ban-user` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å—Ç–∞—Ç—É—Å –≤ –ë–î.

3. **–ù–µ–¥–æ—á–µ—Ç—ã –≤ `script.js`**:
   - –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è `onlineUsers` –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Å–æ–∫–µ—Ç—ã, –Ω–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—Ö–æ–¥–µ —Å–ø–∏—Å–æ–∫ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º –¥–æ –ø–µ—Ä–≤–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ —É–ø–æ–º–∏–Ω–∞–Ω–∏–π (`@username`) —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –∏ —Å–µ—Ä–≤–µ—Ä–µ –Ω–µ–º–Ω–æ–≥–æ –ø–æ-—Ä–∞–∑–Ω–æ–º—É.

## üü¢ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é

1. **–í–Ω–µ–¥—Ä–∏—Ç—å JWT –∏–ª–∏ –°–µ—Å—Å–∏–∏**: –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–∫–µ–Ω—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –ø—Ä–æ–≤–µ—Ä—è—Ç—å—Å—è —Å–µ—Ä–≤–µ—Ä–æ–º –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ.
2. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å HTML**: –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–π—Å—è ID `context-menu`.
3. **–£—Å–∏–ª–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –ø—Ä–∞–≤**: –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø—Ä–æ–≤–µ—Ä—è—Ç—å, –∏–º–µ–µ—Ç –ª–∏ –ø—Ä–∞–≤–æ —Ç–µ–∫—É—â–∏–π (–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π —á–µ—Ä–µ–∑ —Ç–æ–∫–µ–Ω) –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å –ø–µ—Ä–µ–ø–∏—Å–∫—É –∏–ª–∏ –≤—ã–ø–æ–ª–Ω—è—Ç—å –∞–¥–º–∏–Ω-–¥–µ–π—Å—Ç–≤–∏—è.
4. **–í–∫–ª—é—á–∏—Ç—å `fileFilter`**: –í–µ—Ä–Ω—É—Ç—å —Å—Ç—Ä–æ–≥—É—é –ø—Ä–æ–≤–µ—Ä–∫—É —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π —Ñ–∞–π–ª–æ–≤ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ.

**–í—ã —Ö–æ—Ç–∏—Ç–µ, —á—Ç–æ–±—ã —è –Ω–∞—á–∞–ª –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å —ç—Ç–∏ –æ—à–∏–±–∫–∏?**
